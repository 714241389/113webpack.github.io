var j=Object.defineProperty;var M=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var H=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))_.call(t,n)&&H(e,n,t[n]);if(M)for(var n of M(t))G.call(t,n)&&H(e,n,t[n]);return e};import{c as S,a as C,b as D,d as r,m,S as N,e as v,o as W,f as O,r as P,g as f,s as x,h as U,t as Y,i as q,j as A,k as Q,l as X,u as Z,n as ee,E as te,p as ne,q as re}from"./index.56433eb2.js";import{g as ae}from"./getDeviceId.e8f3946a.js";import{g as k,a as L,s as h,c as T,B as y,b,d as $,e as oe,u as ie}from"./Button.8c3124fe.js";import{T as d,u as se,C as K,a as le,L as z,b as I,M as ce,c as ue,S as de}from"./CardContent.d958f1ce.js";import{C as ge,L as me}from"./CardActions.757de529.js";import{T as F}from"./TextField.73c23d88.js";import"./isHostComponent.9ebad583.js";function he(e){return L("MuiCardHeader",e)}const B=k("MuiCardHeader",["root","avatar","action","content","title","subheader"]),pe=S()({name:"MuiCardHeader",selfPropNames:["action","avatar","classes","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],propDefaults:({set:e})=>e({component:"div",disableTypography:!1}),utilityClass:he,slotClasses:()=>({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]})}),fe=h("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>g({[`& .${B.title}`]:t.title,[`& .${B.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),be=h("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),ye=h("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Ce=h("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),E=pe.component(function({allProps:t,classes:n,otherProps:i,props:a}){const l=o=>o instanceof HTMLElement&&o.classList.contains(d.toString()),u=C(()=>{const o=D(()=>a.title)();return o!==void 0&&!l(o)&&!a.disableTypography?r(d,m({get variant(){return a.avatar?"body2":"h5"},get className(){return n.title},component:"span",sx:{display:"block"}},()=>{var c;return(c=a.titleTypographyProps)!=null?c:{}},{children:o})):o}),s=C(()=>{const o=D(()=>a.subheader)();return o!==void 0&&!l(o)&&!a.disableTypography?r(d,m({get variant(){return a.avatar?"body2":"body1"},get className(){return n.subheader},component:"span",sx:{display:"block",color:"text.secondary"}},()=>{var c;return(c=a.subheaderTypographyProps)!=null?c:{}},{children:o})):o});return r(fe,m(i,{get className(){return T(n.root,i.className)},ownerState:t,get children(){return[r(N,{get when(){return!!a.avatar},get children(){return r(be,{get className(){return n.avatar},ownerState:t,get children(){return a.avatar}})}}),r(Ce,{get className(){return n.content},ownerState:t,get children(){return[v(()=>u()),v(()=>s())]}}),r(N,{get when(){return!!a.action},get children(){return r(ye,{get className(){return n.action},ownerState:t,get children(){return a.action}})}})]}}))});function ve(e){return L("MuiListItemIcon",e)}k("MuiListItemIcon",["root","alignItemsFlexStart"]);const xe=S()({name:"MuiListItemIcon",selfPropNames:["alignItems","children","classes"],propDefaults:({set:e})=>e({component:"div"}),utilityClass:ve,slotClasses:e=>({root:["root",e.alignItems==="flex-start"&&"alignItemsFlexStart"]})}),Ie=h("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({theme:e,ownerState:t})=>g({minWidth:56,color:e.palette.action.active,flexShrink:0,display:"inline-flex"},t.alignItems==="flex-start"&&{marginTop:8})),we=xe.component(function({allProps:t,classes:n,otherProps:i,props:a}){const l=se(),u=m({get alignItems(){return l.alignItems}},t);return r(Ie,m(i,{get className(){return T(n.root,i.className)},ownerState:u,get children(){return a.children}}))}),R="magicbroad_jumpbackto",Se=e=>{window.localStorage.setItem(R,e)},ke=()=>window.localStorage.getItem(R),Le=()=>{window.localStorage.removeItem(R)},Te=()=>{const e=ke();return Le(),e};function Re(e){return typeof e=="object"?e===null:typeof e!="function"}function Me(e){let t=e.get(),[n,i]=f(t),a=e.subscribe(l=>{i(l)});return W(()=>a()),n}function w(e){if(Re(e.get()))return Me(e);let t=e.get(),[n,i]=O(t),a=e.subscribe(l=>{let u=P(l);i(u)});return W(()=>a()),C(()=>n)}const He=e=>{const[t,n]=f(""),[i,a]=f(""),l=w(x),u=w(U),s=Y(),o=async()=>{x.set(t()),U.set(i()),await s.auth.signOut(),await s.removeAllSubscriptions(),e.onClose({},"configSet")},c=()=>{a(A.key),n(A.url)};return q(()=>{n(l()),a(u())}),r(ce,{get open(){return e.open},onClose:(p,J)=>e.onClose(p,J),get children(){return r(K,{sx:{maxWidth:"650px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:"300px"},get children(){return[r(E,{title:"Enter Supabase Details"}),r(le,{get children(){return[r(d,{children:"This selection helps you use another supabase instance instead the built-in one. The instance used here must allow auth callback url."}),r(z,{disablePadding:!0,get children(){return[r(I,{get children(){return r(F,{type:"url",sx:{width:"100%"},variant:"standard",label:"URL",get value(){return t()},fullWidth:!0,onChange:p=>n(p.target.value)})}}),r(I,{get children(){return r(F,{sx:{width:"100%"},variant:"standard",label:"Anon Key",get value(){return i()},multiline:!0,fullWidth:!0,onChange:p=>a(p.target.value)})}})]}}),r(d,{children:"Your account will be signed out and unsaved progress will be lost."})]}}),r(ge,{get children(){return[r(y,{onClick:c,get children(){return r(d,{children:"Use Default"})}}),r(b,{sx:{flexGrow:1}}),r(y,{onClick:()=>e.onClose({},"escapeKeyDown"),get children(){return r(d,{children:"Cancel"})}}),r(y,{onClick:o,get children(){return r(d,{children:"Set & Refresh"})}})]}})]}})}})};function De(e){return L("MuiLink",e)}const Ne=k("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),V=S()({name:"MuiLink",autoCallUseClasses:!1,selfPropNames:["TypographyClasses","children","classes","color","underline","variant"],propDefaults:({set:e})=>e({color:"primary",component:"a",underline:"always",variant:"inherit"}),utilityClass:De,slotClasses:e=>({root:["root",`underline${$(e.underline)}`,e.component==="button"&&"button",e.focusVisible&&"focusVisible"]})}),Ue={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Ae=e=>Ue[e]||e,Fe=h(d,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${$(n.underline)}`],n.component==="button"&&t.button]}})(({theme:e,ownerState:t})=>{const n=oe(e,"palette",Ae(t.color))||t.color;return g(g(g(g({},t.underline==="none"&&{textDecoration:"none"}),t.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}}),t.underline==="always"&&{textDecoration:"underline",textDecorationColor:n!=="inherit"?Q(n,.4):void 0,"&:hover":{textDecorationColor:"inherit"}}),t.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Ne.focusVisible}`]:{outline:"auto"}})}),Be=V.component(function({allProps:t,otherProps:n,props:i}){const a=ie(),[l,u]=f(!1),s=m(t,{get focusVisible(){return l()}}),o=V.useClasses(s);return r(Fe,m({get className(){return T(o.root,n.className)},get classes(){return i.TypographyClasses},get color(){return i.color},onBlur:c=>{a.onBlur(c),a.isFocusVisibleRef.current===!1&&u(!1),typeof n.onBlur=="function"&&n.onBlur(c)},onFocus:c=>{a.onFocus(c),a.isFocusVisibleRef.current===!0&&u(!0),typeof n.onFocus=="function"&&n.onFocus(c)},ownerState:t,get variant(){return i.variant}},n,{get component(){return n.component},get children(){return i.children}}))}),Ve=re('<svg><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>',4,!0),Ge=()=>{const e=X(),t=Z(),[n]=ee(),i=w(x),[a,l]=f(!1),u=async()=>{const s=new URL(window.location.href);s.search="",await e.signIn({provider:"github"},{redirectTo:s.toString()})};return te((s,o)=>{if(o){ae();const c=Te();o.user&&t(c||"/")}}),ne(()=>{const s=n.next;s&&s.length>0&&s.startsWith("/")&&!e.user()&&Se(s)}),[r(He,{get open(){return a()},onClose:(s,o)=>{o==="configSet"&&window.location.reload(),l(!1)}}),r(b,{id:"login-methods",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},get children(){return[r(K,{sx:{minWidth:300},get children(){return[r(E,{get title(){return r(d,{variant:"h6",children:"\u767B\u5F55"})}}),r(d,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,get children(){return r(b,{sx:{width:"100%",minWidth:360,bgcolor:"background.paper"},get children(){return r(z,{get children(){return r(I,{disablePadding:!0,onClick:u,id:"login-with-github",get children(){return r(ue,{get children(){return[r(we,{get children(){return r(de,{sx:{width:32,height:32},viewBox:"0 0 16 16",get children(){return Ve.cloneNode(!0)}})}}),r(me,{primary:"\u4F7F\u7528GitHub\u767B\u5F55"})]}})}})}})}})}})]}}),r(b,{sx:{textAlign:"end"},get children(){return r(Be,{sx:{cursor:"pointer"},onClick:()=>l(!0),get children(){return r(d,{variant:"caption",get children(){return["Supabase Service: ",v(()=>new URL(i()).host)]}})}})}})]}})]};export{Ge as default};
//# sourceMappingURL=index.2183c428.js.map
